<div class='page-header clearfix'>
  <h1>资讯列表</h1>
  <ul>
    <li><%= link_to '发布资讯', new_admin_news_path, :class => 'btn btn-default' %></li>
  </ul>
</div>
<%= search_form_for [:admin, @search] do |f| %>
  <div class='col-lg-3'>
    <%= f.label :title_cont, '标题' %>
    <%= f.text_field :title_cont %>
  </div>
  <div class='col-lg-3'>
    <%= f.label :content_cont, '内容' %>
    <%= f.text_field :content_cont %>
  </div>
  <div class='col-lg-3'>
    <%= f.label :editor_id_eq, '编辑' %>
    <%= f.select :editor_id_eq, options_from_collection_for_select(Administrator.all, :id, :name), :include_blank => '全部' %>
  </div>
  <div class='col-lg-3'>
    <button type='submit'>搜索</button>
  </div>
<% end %>
<table class='table table-striped table-hover'>
  <thead>
    <tr>
      <th>标题</th>
      <th>内容</th>
      <th>编辑</th>
      <th>发布时间</th>
      <th>操作</th>
    </tr>
  </thead>
  <% @news.each do |news| %>
    <tr>
      <td><%= link_to news.title , [:admin, news] %></td>
      <td><%= truncate sanitize(strip_tags(news.content)), :length => 45 %></td>
      <td><%= news.editor_name %></td>
      <td><%= l news.created_at, :format => :long %></td>
      <td>
        <%= link_to '修改', edit_admin_news_path(news) %>
        <%= link_to '删除', [:admin, news], :method => :delete, :data => {:confirm => "确定删除《#{news.title}》吗？"} %>
      </td>
    </tr>
  <% end%>
</table>
<%= paginate @news %>
